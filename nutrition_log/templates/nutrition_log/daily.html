<!-- Daily page for the Nutrition Log app -->
{% extends 'nutrition_log/base.html' %}

{% block subcontent %}
    <h1>My Nutrition Log</h1>
    <h2>Daily View</h2>

 
    <!-- TODO this Date label isn't updating
        Date label might not be the best way to go about this. -->
    <p id="currentDateLabel">
        Current Date: 
        <span id="currentDate"></span>
    </p>

    <!-- Date picker -->
    <form action="{% url 'nutrition_log:filter_nutrition_log' %}" method="get">
        <label for="dateInput">Select a Date:</label>
        <input type="date" id="dateInput" name="selectedDate">
        <br>
        <input type="submit" value="Submit">
    </form>



    <!-- logged weight for the day: populated by JS-->
    <h3>Body weight</h3>
    <p><span id="dailyWeightLabel"></span> lbs</p>
    <p><a href="{% url 'nutrition_log:set_weight' %}">Set weight</a></p>
    
    <hr>

    <!-- calories and protein for the day: updated by JS -->
    <h3>Food</h3>
    <p><span id="dailyCaloriesLabel">0</span> Calories</p>
    <p><span id="dailyProteinLabel">0</span> g Protein</p>
    <h4>Breakfast</h4>
    <table id="breakfast"></table>
    <a href="{% url 'nutrition_log:log_food_item' %}">Add item</a>
    <h4>Lunch</h4>
    <table id="lunch"></table>
    <a>Add item</a>
    <h4>Dinner</h4>
    <table id="dinner"></table>
    <a>Add item</a>
    <h4>Snacks</h4>
    <table id="snacks"></table>
    <a>Add item</a>
{% endblock subcontent %}

{% block scripts %}
    <script>
        // WHEN THE SCRIPT LOADS
        // ---------------------
        // initialize date label's text 
        let dateDisplay = document.getElementById("currentDate");
        let today = new Date();
        today.setHours(0, 0, 0, 0);  // need to remove time part. consider using a library for this.
        dateDisplay.innerHTML = today.toDateString();

        // and the daily weight label
        let dailyWeightDisplay = document.getElementById("dailyWeightLabel");
        let dailyWeight = '{{ daily_weight }}';
        dailyWeightDisplay.innerHTML = dailyWeight;

        // and the total calories label
        let dailyCaloriesDisplay = document.getElementById("dailyCaloriesLabel")
        let dailyCalories = '{{ total_calories }}'
        dailyCaloriesDisplay.innerHTML = dailyCalories;

        // TODO and logged food items
        let breakfast = document.getElementById("breakfast");
        let lunch = document.getElementById("lunch");
        let dinner = document.getElementById("dinner");
        let snacks = document.getElementById("snacks");
        console.log(loggedFoodItems);
        
    </script>
{% endblock scripts %}
